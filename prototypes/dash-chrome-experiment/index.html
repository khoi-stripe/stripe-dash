<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dash Chrome Experiment - Two Panel Layout</title>
  
  <!-- Import shared styles -->
  <link rel="stylesheet" href="../../shared/styles/variables.css">
  <link rel="stylesheet" href="../../shared/styles/base.css">
  <link rel="stylesheet" href="../../shared/styles/typography.css">
  <link rel="stylesheet" href="../../shared/styles/components.css">
  <link rel="stylesheet" href="../../shared/styles/color-utilities.css">
  
  <style>
    body {
      margin: 0;
      padding: 0;
      background: white;
      font-family: var(--font-family-ui);
      overflow: hidden;
    }

    /* App Container - Main flexbox layout */
    .app-container {
      display: flex;
      height: 100vh;
      width: 100%;
    }

    .layout-container {
      display: flex;
      flex: 1;
      min-width: 0;
    }

         /* Navigation Panel */
     .nav-panel {
       width: 240px;
       background: white;
       border-right: 1px solid rgba(0, 39, 77, 0.08);
       flex-shrink: 0;
       position: relative;
       display: flex;
       flex-direction: column;
       height: 100vh;
       overflow: hidden;
     }
     
    .nav-panel.collapsed {
       width: 64px;
       overflow: visible;
     }
     
          .nav-panel.collapsed .nav-item-label,
     .nav-panel.collapsed .workload-caret-icon {
       display: none;
     }
     
     /* Account Switcher in Nav Panel */
     #nav-account-switcher {
       margin-bottom: 16px;
     }
     

     
     .nav-panel.collapsed #nav-account-switcher .account-details,
     .nav-panel.collapsed #nav-account-switcher .account-switcher-caret {
       display: none;
     }
     
     .nav-panel.collapsed #nav-account-switcher {
       width: auto;
     }
     
     .nav-panel.collapsed #nav-account-switcher .account-switcher-trigger {
       width: 24px;
       margin: 0 auto;
       justify-content: center;
     }
     
     /* Collapsed state: hide hamburger and reset account switcher */
     .nav-panel.collapsed .account-switcher-container {
       margin: 0 -20px 16px -20px;
       display: flex;
       justify-content: center;
     }
     
     .nav-panel.collapsed .hamburger-button {
       display: none;
     }
     
     /* Disable animations for account switcher during nav collapse */
     #nav-account-switcher,
     #nav-account-switcher *,
     #nav-account-switcher .account-switcher-trigger,
     #nav-account-switcher .account-avatar {
       transition: none !important;
     }
     
     /* Nav item tooltips for collapsed state */
     .workload-item {
       position: relative;
     }
     
     .nav-item-tooltip {
       position: absolute;
       left: 100%;
       top: 50%;
       transform: translateY(-50%);
       margin-left: 8px;
       padding: 4px 8px;
       background: var(--neutral-900);
       color: white;
       font-family: var(--font-family-ui);
       font-size: var(--font-size-12);
       font-weight: var(--font-weight-medium);
       line-height: var(--line-height-16);
       border-radius: 4px;
       white-space: nowrap;
       opacity: 0;
       visibility: hidden;
       transition: opacity 0.2s ease, visibility 0.2s ease;
       pointer-events: none;
       z-index: 99999;
       box-shadow: var(--shadow-md);
       border: 1px solid rgba(255, 255, 255, 0.1);
     }
     
     .nav-item-tooltip::before {
       content: '';
       position: absolute;
       top: 50%;
       left: -4px;
       transform: translateY(-50%);
       width: 0;
       height: 0;
       border-style: solid;
       border-width: 4px 4px 4px 0;
       border-color: transparent var(--neutral-900) transparent transparent;
     }
     
     .nav-panel.collapsed .nav-item:hover .nav-item-tooltip,
     .nav-panel.collapsed .workload-item:hover .nav-item-tooltip,
     .nav-panel.collapsed .account-switcher-trigger:hover .account-switcher-tooltip {
       opacity: 1;
       visibility: visible;
     }
     
     .nav-panel:not(.collapsed) .nav-item-tooltip,
     .nav-panel:not(.collapsed) .account-switcher-tooltip {
       display: none;
     }
     
     /* Customize account switcher for nav panel */
     #nav-account-switcher .account-switcher {
       display: block;
       width: 100%;
     }
     
     #nav-account-switcher .account-switcher-trigger {
       width: 100%;
       min-width: auto;
       background: transparent;
       border: none;
       border-radius: var(--radius-sm);
       padding: 4px 6px;
       height: 36px;
       max-width: 240px;
       box-sizing: content-box;
       margin: 0 -6px;
     }
     
     #nav-account-switcher .account-switcher-trigger:hover {
       background: var(--neutral-50);
     }
     
     /* Account Switcher Container with Hamburger */
     .account-switcher-container {
       position: relative;
       display: flex;
       align-items: center;
       gap: 0;
       margin-bottom: 16px;
       transition: gap 0.2s ease;
     }
     
     .account-switcher-container:hover {
       gap: 8px;
     }
     
     /* Keep container gap when account switcher is open */
     .account-switcher-container.account-switcher-open {
       gap: 8px;
     }
     
     .hamburger-button {
       display: flex;
       align-items: center;
       justify-content: center;
       width: 0;
       height: 24px;
       border: none;
       background: transparent;
       border-radius: var(--radius-sm);
       cursor: pointer;
       opacity: 0;
       transform: translateX(-32px); /* Match the full width including padding */
       transition: all 0.2s ease;
       color: var(--icon-default);
       flex-shrink: 0;
       overflow: hidden;
       padding: 0;
     }
     
     .hamburger-button:hover {
       background: var(--neutral-50);
       color: var(--neutral-700);
     }
     
     .account-switcher-container:hover .hamburger-button {
       opacity: 1;
       transform: translateX(0);
       width: 32px; /* 24px icon + 4px padding on each side */
       height: 32px;
       padding: 4px;
     }
     
     /* Keep hamburger visible when account switcher is open */
     .account-switcher-container.account-switcher-open .hamburger-button {
       opacity: 1;
       transform: translateX(0);
       width: 32px; /* 24px icon + 4px padding on each side */
       height: 32px;
       padding: 4px;
     }
     
     .account-switcher-container:hover #nav-account-switcher {
       width: calc(100% - 40px); /* Account for hamburger (32px) + gap (8px) */
     }
     
     /* Keep account switcher sized for hamburger when popover is open */
     .account-switcher-container.account-switcher-open #nav-account-switcher {
       width: calc(100% - 40px); /* Account for hamburger (32px) + gap (8px) */
     }
     
     .account-switcher-container:hover #nav-account-switcher .account-switcher-trigger {
       max-width: none;
     }
     
     /* Keep account switcher trigger unsized when popover is open */
     .account-switcher-container.account-switcher-open #nav-account-switcher .account-switcher-trigger {
       max-width: none;
     }
     
     /* Hide hamburger when nav panel is collapsed */
     .nav-panel.collapsed .hamburger-button {
       display: none;
     }
     
     .nav-panel.collapsed .account-switcher-container {
       gap: 0 !important;
     }
     
     .nav-panel.collapsed #nav-account-switcher {
       width: 100% !important;
     }
     
     /* Account switcher takes full width by default */
     #nav-account-switcher {
       margin-bottom: 0;
       width: 100%;
       transition: width 0.2s ease;
     }
     
     /* Remove the original margin from account switcher */

     /* Account Panel */
     .account-panel {
       width: 0; /* Hidden by default */
       height: 100vh;
       background: var(--color-background);
       border-right: 1px solid rgba(0, 39, 77, 0.08);
       display: flex;
       flex-direction: column;
       transition: width 0.3s ease;
       overflow: hidden;
       flex-shrink: 0;
     }
     
     .account-panel.open {
       width: 240px; /* Expand to full width */
     }
     
     .account-panel-content {
       flex: 1;
       padding: 12px 20px;
       overflow: visible; /* Allow popover to show outside bounds */
       position: relative;
       display: flex;
       flex-direction: column;
     }
     
     /* Account Group */
     .account-group {
       display: flex;
       flex-direction: column;
       gap: 6px;
       position: relative;
     }
     
     /* Account Item Extensions */
     .account-panel .nav-item {
       position: relative;
       display: flex;
       align-items: center;
       gap: 8px;
       padding: 0;
       color: var(--icon-default);
       text-decoration: none;
       transition: all var(--transition-fast);
       border-radius: var(--radius-sm);
       cursor: pointer;
       height: 24px;
       width: 200px; /* Fixed width - prevents resizing during panel transition */
       min-width: 200px; /* Ensure minimum width is maintained */
       flex-shrink: 0; /* Prevent shrinking */
       box-sizing: border-box;
     }
     
     /* Account-specific items inherit from nav-item above */
     .account-panel .account-item {
       /* Account items inherit from .nav-item above */
       height: 24px; /* Ensure account items are exactly 24px high */
     }
     
     /* Account item specific floating hover (4px extension) */
     .account-panel .account-item::before {
       content: '';
       position: absolute;
       top: -4px;    /* Extends 4px above */
       left: -4px;   /* Extends 4px left */
       right: -4px;  /* Extends 4px right */
       bottom: -4px; /* Extends 4px below */
       background-color: transparent;
       border-radius: 8px;
       transition: background-color var(--transition-fast);
       z-index: 0;
       pointer-events: none;
       display: block;
     }
     
     /* Ensure account item content is above floating hover */
     .account-panel .account-item .nav-item-icon,
     .account-panel .account-item .nav-item-label {
       position: relative;
       z-index: 1;
     }
     
     .account-panel .account-item .nav-item-label {
       margin-left: 0; /* Remove the 8px margin from shared nav-item-label */
     }
     
     /* Add Account Button */
     .add-account-button {
       position: relative;
     }
     
     /* Pin bottom Create button to bottom of panel */
     .add-account-button.bottom-pinned {
       margin-top: auto;
     }
     
     /* Pin user section to bottom of panel */
     .user-section.bottom-pinned {
       margin-top: auto;
       display: flex;
       flex-direction: column;
       gap: 6px;
     }
     
     /* Remove old individual button pinning */
     

     
     /* Hover state pseudo-element (same as nav panel) */
     .account-panel .nav-item::before {
       content: '';
       position: absolute;
       top: -4px;
       left: -4px;
       right: -4px;
       bottom: -4px;
       background-color: transparent;
       border-radius: 8px;
       transition: background-color var(--transition-fast);
       z-index: 0;
       pointer-events: none;
       display: block;
     }
     
     /* Ensure content is above pseudo-element */
     .account-panel .nav-item-icon,
     .account-panel .nav-item-label {
       position: relative;
       z-index: 1;
     }
     
     .account-panel .nav-item-icon {
       width: 24px;
       height: 24px;
       flex-shrink: 0;
       display: flex;
       align-items: center;
       justify-content: center;
     }
     
     .account-panel .nav-item-label {
       flex: 1;
       display: flex;
       align-items: center;
       line-height: 1; /* Override default line-height for better alignment */
       white-space: nowrap; /* Prevent text wrapping */
       overflow: hidden; /* Hide overflow text */
       text-overflow: ellipsis; /* Show ellipsis for long text */
       margin-left: 0; /* Remove inherited left margin */
     }
     
     /* More specific override for account-item labels to ensure no vertical spacing */
     .account-panel .account-item .nav-item-label {
       line-height: 1; /* Force line-height to 1 to eliminate vertical spacing */
       padding: 0; /* Ensure no padding */
       margin: 0; /* Ensure no margin */
     }
     
     /* Only active account is non-interactive */
     .account-panel .account-item.nav-item.active {
       /* Active state - white floating background */
     }
     
     .account-panel .account-item.nav-item.active::before {
       background-color: transparent !important; /* Override shared CSS - no background for active account */
     }
     
     .account-panel .account-item.nav-item.active:hover {
       /* Active state hover - no background */
     }
     
     .account-panel .account-item.nav-item.active:hover::before {
       background-color: transparent !important; /* Override shared CSS - no background for active account on hover */
     }
     

     
     /* Re-enable white hovers for non-active items */
     .account-panel .account-item.nav-item:not(.active):hover {
       /* Hover handled by floating pseudo-element */
     }
     
     .account-panel .account-item.nav-item:not(.active):hover::before {
       background-color: white; /* White floating hover background */
     }
     
     .account-panel .add-account-button.nav-item:hover {
       /* Remove background change from button itself */
     }
     
     .account-panel .add-account-button.nav-item:hover::before {
       background-color: white;
     }
     
     /* User section nav item hover styles */
     .account-panel .user-section .nav-item:hover {
       /* Remove background change from button itself */
     }
     
     .account-panel .user-section .nav-item:hover::before {
       background-color: white;
     }
     
     /* Account Avatar */
     .account-avatar {
       width: 24px;
       height: 24px;
       border-radius: 4px;
       display: flex;
       align-items: center;
       justify-content: center;
       font-family: var(--font-family-ui);
       font-size: var(--font-size-12);
       font-weight: var(--font-weight-medium);
       color: white;
       position: relative;
     }
     
     .account-avatar[data-initials]:before {
       content: attr(data-initials);
     }
     
     /* Use account switcher component color palette */
     .account-avatar[data-color="#3B82F6"] { background-color: #3B82F6; } /* blue-500 */
     .account-avatar[data-color="#10B981"] { background-color: #10B981; } /* emerald-500 */
     .account-avatar[data-color="#F59E0B"] { background-color: #F59E0B; } /* amber-500 */
     
     /* Active Account Avatar Stroke */
     .account-item.active .account-avatar:after {
       content: '';
       position: absolute;
       top: -2.5px;
       left: -2.5px;
       right: -2.5px;
       bottom: -2.5px;
       border: 1.5px solid;
       border-radius: 6px;
       pointer-events: none;
     }
     
     .account-item.active .account-avatar[data-color="#3B82F6"]:after { border-color: rgba(59, 130, 246, 0.5); }
     .account-item.active .account-avatar[data-color="#10B981"]:after { border-color: rgba(16, 185, 129, 0.5); }
     .account-item.active .account-avatar[data-color="#F59E0B"]:after { border-color: rgba(245, 158, 11, 0.5); }
     
     /* Account Badge */
     .account-badge {
       position: absolute;
       right: 8px;
       top: 50%;
       transform: translateY(-50%);
       color: var(--neutral-400);
       font-family: var(--font-family-ui);
       font-size: var(--font-size-12);
       font-weight: var(--font-weight-semibold);
       padding: 2px 6px;
       line-height: var(--line-height-16);
       letter-spacing: 0;
       min-width: 16px;
       text-align: center;
     }
     


     /* Content Panel */
     .content-panel {
       flex: 1;
       background: white;
       min-width: 0; /* Allows flex item to shrink below content size */
       position: relative;
       display: flex;
       flex-direction: column;
     }

     /* Content Header */
     .content-header {
       height: 60px;
       padding: 12px 32px;
       background: white;
       display: flex;
       align-items: center;
       width: 100%;
       box-sizing: border-box;
     }
     
     /* Header Actions */
     .header-actions {
       display: flex;
       align-items: center;
       gap: 8px; /* 8px spacing between icons */
       margin-left: auto; /* Push to right side */
     }
     
     .header-icon {
       display: flex;
       align-items: center;
       justify-content: center;
       cursor: pointer;
     }

     /* Search Bar */
     .search-container {
       position: relative;
       width: 360px;
     }

     .search-input {
       width: 100%;
       height: 36px;
       padding: 8px 8px 8px 32px;
       background: var(--neutral-50);
       border: none;
       border-radius: 8px;
       font-family: var(--font-family-ui);
       font-size: var(--font-size-14);
       color: var(--color-text);
       box-sizing: border-box;
       transition: var(--transition-default);
     }

     .search-input:focus {
       outline: none;
       background: var(--neutral-50);
     }

     .search-input::placeholder {
       color: var(--color-text-muted);
     }

     .search-icon {
       position: absolute;
       left: 8px;
       top: 50%;
       transform: translateY(-50%);
       width: 12px;
       height: 12px;
       color: var(--color-text-muted);
       pointer-events: none;
       display: flex;
       align-items: center;
       justify-content: center;
     }

     .search-icon svg {
       width: 12px;
       height: 12px;
       stroke: currentColor;
       stroke-width: 1.5;
       fill: none;
     }

     /* Main Navigation */
     .main-nav {
       display: flex;
       flex-direction: column;
       gap: 8px;
     }
     
     /* Workloads Navigation */
     .workloads-nav {
       display: flex;
       flex-direction: column;
       gap: 8px;
       margin-top: 24px;
     }
     
     /* Bottom Navigation */
     .bottom-nav {
       display: flex;
       flex-direction: column;
       gap: 8px;
       padding: 12px 20px;
       margin-top: auto; /* This pushes it to the bottom */
     }
     
     /* Floating Collapse Handle */
     .collapse-handle {
       position: fixed;
       left: 240px; /* Right edge of nav panel */
       top: 50%;
       transform: translateY(-50%);
       padding: 8px;
       z-index: 10;
       cursor: pointer;
       transition: left 0.3s ease;
     }
     
     .collapse-handle.collapsed {
       left: 64px; /* Adjust position when collapsed */
     }
     
     /* When account panel is open, move collapse handle to stay with nav panel */
     .collapse-handle.account-panel-open {
       left: 480px; /* 240px (account panel) + 240px (nav panel) */
     }
     
     .collapse-handle.account-panel-open.collapsed {
       left: 304px; /* 240px (account panel) + 64px (collapsed nav panel) */
     }
     
     .collapse-line {
       width: 2px;
       height: 14px;
       background-color: var(--neutral-200);
       border-radius: 1px; /* Rounded ends */
       transition: opacity 0.2s ease;
     }
     
     .collapse-arrow {
       position: absolute;
       top: 50%;
       left: 50%;
       transform: translate(-50%, -50%) rotate(180deg); /* Default: left-pointing when expanded */
       opacity: 0;
       transition: opacity 0.2s ease, transform 0.2s ease;
     }
     
     /* Show arrow and hide line on hover */
     .collapse-handle:hover .collapse-line {
       opacity: 0;
     }
     
     .collapse-handle:hover .collapse-arrow {
       opacity: 1;
     }
     
     /* Right-pointing arrow when collapsed (expand direction) */
     .collapse-handle.collapsed .collapse-arrow {
       transform: translate(-50%, -50%) rotate(0deg);
     }
     
     .collapse-tooltip {
       position: absolute;
       left: 100%;
       top: 50%;
       transform: translateY(-50%);
       margin-left: 8px;
       padding: 4px 8px;
       background: var(--neutral-900);
       color: white;
       font-family: var(--font-family-ui);
       font-size: var(--font-size-12);
       font-weight: var(--font-weight-medium);
       line-height: var(--line-height-16);
       border-radius: 4px;
       white-space: nowrap;
       opacity: 0;
       visibility: hidden;
       transition: opacity 0.2s ease, visibility 0.2s ease;
       pointer-events: none;
     }
     
     .collapse-handle:hover .collapse-tooltip {
       opacity: 1;
       visibility: visible;
     }
     
     .collapse-handle.no-hover:hover .collapse-tooltip {
       opacity: 0;
       visibility: hidden;
     }
     
     .collapse-handle.no-hover:hover .collapse-line {
       opacity: 1;
     }
     
     .collapse-handle.no-hover:hover .collapse-arrow {
       opacity: 0;
     }

     /* Content Body */
     .content-body {
       flex: 1;
       background: white;
       overflow-y: auto;
       padding: 20px 32px 32px 32px;
     }
     
     .content-placeholder {
       width: 100%;
       height: 100%;
       background-color: var(--neutral-50);
       border-radius: 12px;
     }

     /* Responsive behavior */
     @media (max-width: 768px) {
       .nav-panel {
         position: fixed;
         top: 0;
         left: 0;
         height: 100vh;
         z-index: 999;
         box-shadow: var(--shadow-lg);
       }
       
       .content-panel {
         width: 100%;
       }
       
       .nav-toggle {
         left: 20px !important;
       }
       
       .collapse-handle {
         display: none; /* Hide on mobile */
       }
       
       .nav-panel.collapsed {
         width: 64px;
       }
     }
  </style>
    
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const navPanel = document.getElementById('navPanel');
        const accountPanel = document.getElementById('accountPanel');
        const collapseHandle = document.querySelector('.collapse-handle');
        const hamburgerButton = document.querySelector('.hamburger-button');
        const tooltip = document.querySelector('.collapse-tooltip');
        
        let isCollapsed = false;
        let isAccountPanelOpen = false;
        let wasNavCollapsedBeforeAccountPanel = false; // Track previous nav state
        
        // Toggle account panel on hamburger click
        hamburgerButton.addEventListener('click', function() {
          isAccountPanelOpen = !isAccountPanelOpen;
          
          if (isAccountPanelOpen) {
            // Store current nav panel state before opening account panel
            wasNavCollapsedBeforeAccountPanel = isCollapsed;
            
            // Open account panel and collapse nav panel
            accountPanel.classList.add('open');
            navPanel.classList.add('collapsed');
            collapseHandle.classList.add('collapsed');
            collapseHandle.classList.add('account-panel-open');
            tooltip.textContent = 'Expand';
            isCollapsed = true;
          } else {
            // Close account panel and restore previous nav state
            accountPanel.classList.remove('open');
            collapseHandle.classList.remove('account-panel-open');
            
            // Restore nav panel to previous state
            if (!wasNavCollapsedBeforeAccountPanel) {
              navPanel.classList.remove('collapsed');
              collapseHandle.classList.remove('collapsed');
              tooltip.textContent = 'Collapse';
              isCollapsed = false;
            }
          }
        });
        
        // Helper function to close account panel
        function closeAccountPanel() {
          if (isAccountPanelOpen) {
            // Close account panel and restore previous nav state
            accountPanel.classList.remove('open');
            collapseHandle.classList.remove('account-panel-open');
            
            // Restore nav panel to previous state
            if (!wasNavCollapsedBeforeAccountPanel) {
              navPanel.classList.remove('collapsed');
              collapseHandle.classList.remove('collapsed');
              tooltip.textContent = 'Collapse';
              isCollapsed = false;
            }
            
            isAccountPanelOpen = false;
          }
        }
        
        // Close account panel when clicking on nav panel
        navPanel.addEventListener('click', function(event) {
          // Don't close if clicking on account switcher or other interactive elements
          const clickedElement = event.target;
          const isAccountSwitcherClick = clickedElement.closest('.account-switcher-container') ||
                                       clickedElement.closest('.account-switcher-dropdown') ||
                                       clickedElement.closest('.hamburger-button');
          
          if (!isAccountSwitcherClick && isAccountPanelOpen) {
            closeAccountPanel();
          }
        });
        
        // Close account panel when clicking on content panel
        const contentPanel = document.getElementById('contentPanel');
        if (contentPanel) {
          contentPanel.addEventListener('click', function(event) {
            if (isAccountPanelOpen) {
              closeAccountPanel();
            }
          });
        }
        
        // Update existing account panel click handler to use helper function
        // Close account panel when clicking on background only
        accountPanel.addEventListener('click', function(event) {
          if (isAccountPanelOpen) {
            // Only close if clicking directly on specific background elements
            const clickedElement = event.target;
            
            // List of elements that should close the panel when clicked
            const shouldClosePanel = clickedElement === accountPanel || 
                                   clickedElement.classList.contains('account-panel-content') ||
                                   clickedElement.classList.contains('account-group');
            
            if (shouldClosePanel) {
              closeAccountPanel();
            }
          }
        });
        
        // Toggle navigation panel on handle click
        collapseHandle.addEventListener('click', function() {
          // If account panel is open, close it first and restore previous state
          if (isAccountPanelOpen) {
            closeAccountPanel();
            return; // Exit early since we closed the account panel
          }
          
          // Normal nav panel toggle behavior
          // Dismiss tooltip immediately and prevent hover
          collapseHandle.classList.add('no-hover');
          
          isCollapsed = !isCollapsed;
          
          if (isCollapsed) {
            navPanel.classList.add('collapsed');
            collapseHandle.classList.add('collapsed');
            tooltip.textContent = 'Expand';
            // Allow hover again once collapsed
            collapseHandle.classList.remove('no-hover');
          } else {
            navPanel.classList.remove('collapsed');
            collapseHandle.classList.remove('collapsed');
            tooltip.textContent = 'Collapse';
            // Allow hover again once expanded
            collapseHandle.classList.remove('no-hover');
          }
        });
        
        // Handle Create button clicks (both buttons)
        const createButtons = accountPanel.querySelectorAll('.add-account-button');
        createButtons.forEach(function(createButton) {
          createButton.addEventListener('click', function(event) {
            event.stopPropagation(); // Prevent panel from closing
            // Add create account functionality here if needed
          });
        });
        
        // Handle Username button click
        const usernameButton = document.getElementById('usernameButton');
        if (usernameButton) {
          usernameButton.addEventListener('click', function(event) {
            event.stopPropagation(); // Prevent panel from closing
            // Add user profile functionality here if needed
          });
        }
        
        // Handle Sign Out button click
        const signOutButton = document.getElementById('signOutButton');
        if (signOutButton) {
          signOutButton.addEventListener('click', function(event) {
            event.stopPropagation(); // Prevent panel from closing
            // Add sign out functionality here if needed
            console.log('Sign out clicked');
          });
        }
        
        // Account Panel Functionality
        const addAccountButton = document.getElementById('addAccountButton');
        const accountItems = document.querySelectorAll('.account-item');
        
        // Account data with realistic hierarchical structure
        const accounts = {
          'acme-inc': {
            name: 'Acme, Inc.',
            isOrganization: true,
            color: '#3B82F6',
            initials: 'AI',
            lastUsed: Date.now(), // Currently active
            description: 'Multi-business conglomerate',
            subAccounts: {
              'acme-eats-us': { name: 'Acme Eats US', region: 'United States', type: 'Food Delivery' },
              'acme-eats-ca': { name: 'Acme Eats CA', region: 'Canada', type: 'Food Delivery' },
              'acme-eats-uk': { name: 'Acme Eats UK', region: 'United Kingdom', type: 'Food Delivery' },
              'acme-rides-us': { name: 'Acme Rides US', region: 'United States', type: 'Transportation' },
              'acme-rides-ca': { name: 'Acme Rides CA', region: 'Canada', type: 'Transportation' },
              'acme-deliveries-us': { name: 'Acme Deliveries US', region: 'United States', type: 'Logistics' },
              'acme-deliveries-uk': { name: 'Acme Deliveries UK', region: 'United Kingdom', type: 'Logistics' },
              'acme-financial': { name: 'Acme Financial', region: 'Global', type: 'Financial Services' }
            }
          },
          'cactus-practice': {
            name: 'Cactus Practice',
            isOrganization: false,
            color: '#10B981',
            initials: 'CP',
            lastUsed: Date.now() - (24 * 60 * 60 * 1000), // 1 day ago
            description: 'Purveyors of cacti online'
          },
          'lil-fatsos': {
            name: 'Lil\'Fatsos',
            isOrganization: true,
            color: '#F59E0B',
            initials: 'LF',
            lastUsed: Date.now() - (7 * 24 * 60 * 60 * 1000), // 7 days ago
            description: 'Amazing sandwiches and subs',
            subAccounts: {
              'lf-midtown': { name: 'Midtown East', region: 'Manhattan, NYC', address: '123 E 42nd St' },
              'lf-village': { name: 'East Village', region: 'Manhattan, NYC', address: '456 E 9th St' },
              'lf-brooklyn': { name: 'Park Slope', region: 'Brooklyn, NYC', address: '789 7th Ave' },
              'lf-queens': { name: 'Astoria', region: 'Queens, NYC', address: '321 Ditmars Blvd' },
              'lf-soho': { name: 'SoHo', region: 'Manhattan, NYC', address: '654 Spring St' }
            }
          }
        };
        
        let currentAccount = 'acme-inc';
        let currentSubAccount = 'all-accounts'; // Default to "All accounts" for organizations
        
        // Make variables globally accessible for callbacks
        window.accounts = accounts;
        window.currentAccount = currentAccount;
        window.currentSubAccount = currentSubAccount;
        
        // Account switching functionality
        accountItems.forEach(item => {
          if (!item.classList.contains('add-account-button')) {
            item.addEventListener('click', function(event) {
              event.stopPropagation(); // Prevent event from bubbling up to account panel
              const accountId = this.dataset.account;
              if (accountId) {
                switchAccount(accountId);
              }
            });
          }
        });
        
        function switchAccount(accountId) {
          const account = accounts[accountId];
          if (!account) {
            console.error('❌ Account not found:', accountId);
            return;
          }
          
          // Check if switching to same account
          if (accountId === currentAccount) {
            // Allow switching to same account to refresh view
          }
          
          // Update lastUsed timestamp
          account.lastUsed = Date.now();
          
          // Update current account
          currentAccount = accountId;
          
          // Set default sub-account for organizations
          if (account.isOrganization && account.subAccounts) {
            currentSubAccount = 'all-accounts'; // Default to "All accounts" for organizations
          } else {
            currentSubAccount = null; // No sub-account for non-orgs
          }
          
          // Update window references BEFORE calling updateContentPanel
          window.currentAccount = currentAccount;
          window.currentSubAccount = currentSubAccount;
          
          // Update UI
          updateActiveAccount(accountId);
          reorderAccountList(accountId);
          updateNavAccountSwitcher(account);
          
          // Update content panel - pass "All accounts" object if that's the current selection
          if (account.isOrganization && currentSubAccount === 'all-accounts') {
            updateContentPanel({
              id: 'all-accounts',
              name: 'All accounts',
              type: account.name,
              isAllAccounts: true
            });
          } else {
            updateContentPanel(account);
          }
        }
        
        function reorderAccountList(activeAccountId) {
          const accountGroup = document.querySelector('.account-group');
          const addAccountButton = document.getElementById('addAccountButton');
          
          // Get all account items except the add button
          const accountItems = Array.from(accountGroup.querySelectorAll('.account-item:not(.add-account-button)'));
          
          // Sort accounts: active first, then by recency
          const sortedAccountIds = Object.keys(accounts).sort((a, b) => {
            if (a === activeAccountId) return -1;
            if (b === activeAccountId) return 1;
            return accounts[b].lastUsed - accounts[a].lastUsed;
          });
          
          // Reorder DOM elements
          sortedAccountIds.forEach(accountId => {
            const accountElement = accountGroup.querySelector(`[data-account="${accountId}"]`);
            if (accountElement) {
              accountGroup.insertBefore(accountElement, addAccountButton);
            }
          });
        }
        
        function updateActiveAccount(accountId) {
          // Remove active class and tooltip from all account items
          accountItems.forEach(item => {
            item.classList.remove('active');
            item.removeAttribute('title');
          });
          
          // Add active class and tooltip to selected account
          const activeItem = document.querySelector(`[data-account="${accountId}"]`);
          if (activeItem) {
            activeItem.classList.add('active');
            activeItem.setAttribute('title', 'Current account');
          }
        }
        
        function updateNavAccountSwitcher(account) {
          if (!window.navAccountSwitcherInstance) {
            return;
          }
          
          if (account.isOrganization && account.subAccounts) {
            // For organizations: show current sub-account and populate dropdown with all sub-accounts
            
            // Use 2-line variant for organizations to show sub-account and organization name
            window.navAccountSwitcherInstance.options.variant = '2-line';
            
            // Check if we're showing "All accounts" or a specific sub-account
            if (currentSubAccount === 'all-accounts') {
              // Update current account to show "All accounts"
              window.navAccountSwitcherInstance.options.currentAccount = {
                id: 'all-accounts',
                name: 'All accounts',
                type: account.name,  // Organization name as type
                isAllAccounts: true,
                color: account.color // Include the organization color
              };
            } else {
              // Show specific sub-account
              const currentSubAccountData = account.subAccounts[currentSubAccount];
              window.navAccountSwitcherInstance.options.currentAccount = {
                id: currentSubAccount,
                name: currentSubAccountData.name,
                type: account.name,  // Organization name as type
                color: account.color // Include the organization color
              };
            }
            
            // Update accounts list to show all sub-accounts
            window.navAccountSwitcherInstance.options.accounts = Object.entries(account.subAccounts).map(([id, data]) => ({
              id: id,
              name: data.name,
              type: data.region || data.type || 'Location'
            }));
            
            // Force re-render the account switcher
            window.navAccountSwitcherInstance.render();
            window.navAccountSwitcherInstance.bindEvents();
            
          } else {
            // For non-organizations: show account name only, use 1-line variant to remove second line
            window.navAccountSwitcherInstance.options.variant = '1-line';
            
            window.navAccountSwitcherInstance.options.currentAccount = {
              id: currentAccount,
              name: account.name,
              type: '', // Empty type since we're using 1-line variant
              color: account.color // Include the account color
            };
            
            // Single account in the list (no dropdown options)
            window.navAccountSwitcherInstance.options.accounts = [{
              id: currentAccount,
              name: account.name,
              type: '',
              color: account.color // Include the account color
            }];
            
            // Force re-render the account switcher
            window.navAccountSwitcherInstance.render();
            window.navAccountSwitcherInstance.bindEvents();
          }
        }
        
        function updateContentPanel(account) {
          // Update content placeholder to show current account and sub-account
          const contentPlaceholder = document.querySelector('.content-placeholder');
          
          if (!contentPlaceholder) {
            console.error('❌ Content placeholder not found!');
            return;
          }
          
          // Generate colors for accounts (same logic as account switcher)
          function generateAccountColors() {
            const colors = [
              '#3B82F6', // blue-500
              '#8B5CF6', // violet-500
              '#10B981', // emerald-500
              '#F59E0B', // amber-500
              '#EF4444', // red-500
              '#EC4899', // pink-500
              '#06B6D4', // cyan-500
              '#84CC16', // lime-500
              '#F97316', // orange-500
              '#6366F1', // indigo-500
              '#14B8A6', // teal-500
              '#F87171', // red-400
              '#A78BFA', // violet-400
              '#34D399', // emerald-400
              '#FBBF24', // amber-400
            ];
            
            const accountColors = {};
            const navSwitcherAccounts = window.navAccountSwitcherInstance?.options?.accounts || [];
            navSwitcherAccounts.forEach((acc, index) => {
              accountColors[acc.id] = colors[index % colors.length];
            });
            
            return accountColors;
          }
          
          // Clear existing content and set up centered layout
          contentPlaceholder.innerHTML = '';
          contentPlaceholder.style.cssText = `
            width: 100%;
            height: 100%;
            background-color: var(--color-background);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
          `;
          
          // Handle "All accounts" special case
          if (account.id === 'all-accounts' || account.isAllAccounts) {
            const currentOrgAccount = window.accounts[window.currentAccount];
            const subAccountCount = Object.keys(currentOrgAccount.subAccounts).length;
            
            contentPlaceholder.innerHTML = `
              <div style="font-family: var(--font-family-ui); font-size: var(--font-size-24); font-weight: var(--font-weight-semibold); color: var(--color-text); text-align: center; line-height: var(--line-height-32);">
                ${currentOrgAccount.name}
              </div>
              <div style="font-family: var(--font-family-ui); font-size: var(--font-size-16); color: var(--color-text-subdued); text-align: center; line-height: var(--line-height-24);">
                All accounts • ${subAccountCount} sub-accounts
              </div>
            `;
            return;
          }
          
          // Get account colors
          const accountColors = generateAccountColors();
          
          // Build account display content for regular accounts
          let displayHTML = `
            <div style="font-family: var(--font-family-ui); font-size: var(--font-size-24); font-weight: var(--font-weight-semibold); color: var(--color-text); text-align: center; line-height: var(--line-height-32);">
              ${account.name}
            </div>
          `;
          
          if (account.isOrganization && account.subAccounts && window.currentSubAccount) {
            const subAccountData = account.subAccounts[window.currentSubAccount];
            const subAccountColor = accountColors[window.currentSubAccount] || '#6D7C8C';
            displayHTML += `
              <div style="font-family: var(--font-family-ui); font-size: var(--font-size-16); color: ${subAccountColor}; text-align: center; line-height: var(--line-height-24);">
                ${subAccountData.name}${subAccountData.region ? ` • ${subAccountData.region}` : ''}
              </div>
            `;
          } else if (account.description) {
            // For non-organization accounts, use the predefined account color
            const accountColor = account.color || '#6D7C8C'; // Fallback to neutral if no color defined
            displayHTML += `
              <div style="font-family: var(--font-family-ui); font-size: var(--font-size-16); color: ${accountColor}; text-align: center; line-height: var(--line-height-24);">
                ${account.description}
              </div>
            `;
          } else if (account.isOrganization && account.subAccounts) {
            // Fallback for organizations that didn't match the "All accounts" case
            const subAccountCount = Object.keys(account.subAccounts).length;
            displayHTML += `
              <div style="font-family: var(--font-family-ui); font-size: var(--font-size-16); color: var(--color-text-subdued); text-align: center; line-height: var(--line-height-24);">
                ${subAccountCount} sub-accounts
              </div>
            `;
          }
          
          contentPlaceholder.innerHTML = displayHTML;
        }
        
        // Make function globally accessible for callbacks
        window.updateContentPanel = updateContentPanel;
        
        // Initialize Create popover using global component
        const createPopover = new Popover(addAccountButton, {
          position: 'right',
          offset: 8,
          trigger: 'hover',
          hideDelay: 100,
          content: [
            {
              icon: `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                       <line x1="12" y1="5" x2="12" y2="19"/>
                       <line x1="5" y1="12" x2="19" y2="12"/>
                     </svg>`,
              label: 'Create account',
              onClick: () => {
                console.log('Create account clicked');
                // Add your create account logic here
              }
            },
            {
              icon: `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                       <path d="M3 21h18"/>
                       <path d="M5 21V7l8-4v18"/>
                       <path d="M19 21V11l-6-4"/>
                     </svg>`,
              label: 'Create organization',
              onClick: () => {
                console.log('Create organization clicked');
                // Add your create organization logic here
              }
            }
          ]
        });
        
        // Initialize duplicate Create popover
        const addAccountButton2 = document.getElementById('addAccountButton2');
        const createPopover2 = new Popover(addAccountButton2, {
          position: 'right',
          offset: 8,
          trigger: 'hover',
          hideDelay: 100,
          content: [
            {
              icon: `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                       <line x1="12" y1="5" x2="12" y2="19"/>
                       <line x1="5" y1="12" x2="19" y2="12"/>
                     </svg>`,
              label: 'Create account',
              onClick: () => {
                console.log('Create account clicked (button 2)');
                // Add your create account logic here
              }
            },
            {
              icon: `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                       <path d="M3 21h18"/>
                       <path d="M5 21V7l8-4v18"/>
                       <path d="M19 21V11l-6-4"/>
                     </svg>`,
              label: 'Create organization',
              onClick: () => {
                console.log('Create organization clicked (button 2)');
                // Add your create organization logic here
              }
            }
          ]
        });
        

        
        // Initialize account list order
        reorderAccountList(currentAccount);
        
        // Initialize the current account display
        
        // Update content panel - show "All accounts" if that's the current selection
        const account = accounts[currentAccount];
        if (account.isOrganization && currentSubAccount === 'all-accounts') {
          updateContentPanel({
            id: 'all-accounts',
            name: 'All accounts',
            type: account.name,
            isAllAccounts: true
          });
        } else {
          updateContentPanel(account);
        }
        
        updateNavAccountSwitcher(account);
        
        // Force re-render to pick up correct colors
        if (window.navAccountSwitcherInstance) {
          window.navAccountSwitcherInstance.render();
          window.navAccountSwitcherInstance.bindEvents();
        }
        
      });
    </script>
</head>
<body>
  <div class="app-container">
    <!-- Account Panel -->
    <div class="account-panel" id="accountPanel">
      <div class="account-panel-content">
        <!-- Account Group -->
        <div class="account-group">
          <!-- Account Items -->
          <div class="account-item nav-item active" data-account="acme-inc" title="Current account">
            <div class="nav-item-icon">
              <div class="account-avatar" data-initials="AI" data-color="#3B82F6"></div>
            </div>
            <span class="nav-item-label">Acme, Inc.</span>
            <span class="account-badge">8</span>
          </div>
          
          <div class="account-item nav-item" data-account="cactus-practice">
            <div class="nav-item-icon">
              <div class="account-avatar" data-initials="CP" data-color="#10B981"></div>
            </div>
            <span class="nav-item-label">Cactus Practice</span>
          </div>
          
          <div class="account-item nav-item" data-account="lil-fatsos">
            <div class="nav-item-icon">
              <div class="account-avatar" data-initials="LF" data-color="#F59E0B"></div>
            </div>
            <span class="nav-item-label">Lil'Fatsos</span>
            <span class="account-badge">5</span>
          </div>
          
          <!-- Add Account Button -->
          <div class="add-account-button nav-item" id="addAccountButton">
            <div class="nav-item-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
            </div>
            <span class="nav-item-label">Create</span>
          </div>
          
          <!-- Duplicate Add Account Button -->
          <div class="add-account-button nav-item" id="addAccountButton2">
            <div class="nav-item-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
            </div>
            <span class="nav-item-label">Create</span>
          </div>
        </div>



        <!-- Bottom User Section -->
        <div class="user-section bottom-pinned">
          <!-- Username Button -->
          <div class="nav-item" id="usernameButton">
            <div class="nav-item-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
            </div>
            <span class="nav-item-label">John Doe</span>
          </div>

          <!-- Sign Out Button -->
          <div class="nav-item" id="signOutButton">
            <div class="nav-item-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                <polyline points="16,17 21,12 16,7"/>
                <line x1="21" y1="12" x2="9" y2="12"/>
              </svg>
            </div>
            <span class="nav-item-label">Sign Out</span>
          </div>
        </div>

      </div>
    </div>

    <div class="layout-container">
         <!-- Navigation Panel -->
     <div class="nav-panel" id="navPanel">
       <div style="padding: 12px 20px; flex: 1;">
         <!-- Account Switcher -->
         <div class="account-switcher-container">
           <button class="hamburger-button" type="button">
             <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
               <line x1="3" y1="6" x2="21" y2="6"/>
               <line x1="3" y1="12" x2="21" y2="12"/>
               <line x1="3" y1="18" x2="21" y2="18"/>
             </svg>
           </button>
           <div id="nav-account-switcher"></div>
         </div>
         <div class="main-nav">
           <a href="#" class="nav-item active">
             <div class="nav-item-icon">
               <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                 <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                 <polyline points="9,22 9,12 15,12 15,22"/>
               </svg>
             </div>
             <span class="nav-item-label">Home</span>
             <div class="nav-item-tooltip">Home</div>
           </a>
           
           <a href="#" class="nav-item">
             <div class="nav-item-icon">
               <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                 <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                 <line x1="9" y1="9" x2="15" y2="9"/>
                 <line x1="9" y1="15" x2="15" y2="15"/>
               </svg>
             </div>
             <span class="nav-item-label">Balances</span>
             <div class="nav-item-tooltip">Balances</div>
           </a>
           
           <a href="#" class="nav-item">
             <div class="nav-item-icon">
               <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                 <path d="M12 1v6m0 0l4-4m-4 4L8 3"/>
                 <path d="M12 23v-6m0 0l4 4m-4-4l-4 4"/>
                 <circle cx="12" cy="12" r="2"/>
               </svg>
             </div>
             <span class="nav-item-label">Transactions</span>
             <div class="nav-item-tooltip">Transactions</div>
           </a>
           
           <a href="#" class="nav-item">
             <div class="nav-item-icon">
               <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                 <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                 <circle cx="12" cy="7" r="4"/>
               </svg>
             </div>
             <span class="nav-item-label">Customers</span>
             <div class="nav-item-tooltip">Customers</div>
           </a>
           
           <a href="#" class="nav-item">
             <div class="nav-item-icon">
               <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                 <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
                 <line x1="3" y1="6" x2="21" y2="6"/>
                 <path d="M16 10a4 4 0 0 1-8 0"/>
               </svg>
             </div>
             <span class="nav-item-label">Product Catalog</span>
             <div class="nav-item-tooltip">Product Catalog</div>
           </a>
         </div>
         
         <div class="workloads-nav">
           <a href="#" class="workload-item">
             <div class="nav-item-icon">
               <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                 <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
               </svg>
             </div>
             <span class="nav-item-label">Connect</span>
             <div class="workload-caret-icon">
               <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                 <polyline points="6,9 12,15 18,9"/>
               </svg>
             </div>
             <div class="nav-item-tooltip">Connect</div>
           </a>
           
           <a href="#" class="workload-item">
             <div class="nav-item-icon">
               <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                 <rect x="1" y="3" width="15" height="13"/>
                 <path d="M16 8l2-2 2 2"/>
                 <circle cx="11" cy="11" r="2"/>
               </svg>
             </div>
             <span class="nav-item-label">Payments</span>
             <div class="workload-caret-icon">
               <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                 <polyline points="6,9 12,15 18,9"/>
               </svg>
             </div>
             <div class="nav-item-tooltip">Payments</div>
           </a>
           
           <a href="#" class="workload-item">
             <div class="nav-item-icon">
               <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                 <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                 <polyline points="14,2 14,8 20,8"/>
                 <line x1="16" y1="13" x2="8" y2="13"/>
                 <line x1="16" y1="17" x2="8" y2="17"/>
                 <polyline points="10,9 9,9 8,9"/>
               </svg>
             </div>
             <span class="nav-item-label">Billing</span>
             <div class="workload-caret-icon">
               <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                 <polyline points="6,9 12,15 18,9"/>
               </svg>
             </div>
             <div class="nav-item-tooltip">Billing</div>
           </a>
           
           <a href="#" class="workload-item">
             <div class="nav-item-icon">
               <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                 <path d="M3 3v18h18"/>
                 <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"/>
               </svg>
             </div>
             <span class="nav-item-label">Reporting</span>
             <div class="workload-caret-icon">
               <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                 <polyline points="6,9 12,15 18,9"/>
               </svg>
             </div>
             <div class="nav-item-tooltip">Reporting</div>
           </a>
           
           <a href="#" class="workload-item">
             <div class="nav-item-icon">
               <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                 <circle cx="12" cy="12" r="1"/>
                 <circle cx="19" cy="12" r="1"/>
                 <circle cx="5" cy="12" r="1"/>
               </svg>
             </div>
             <span class="nav-item-label">More</span>
             <div class="workload-caret-icon">
               <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                 <polyline points="6,9 12,15 18,9"/>
               </svg>
             </div>
             <div class="nav-item-tooltip">More</div>
           </a>
         </div>
       </div>
       
       <!-- Bottom Navigation -->
       <div class="bottom-nav">
         <a href="#" class="nav-item">
           <div class="nav-item-icon">
             <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
               <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>
               <rect x="8" y="2" width="8" height="4" rx="1" ry="1"/>
             </svg>
           </div>
           <span class="nav-item-label">Developers</span>
           <div class="nav-item-tooltip">Developers</div>
         </a>
       </div>
     </div>
     
     <!-- Floating Collapse Handle -->
     <div class="collapse-handle">
       <div class="collapse-line"></div>
       <svg class="collapse-arrow" width="12" height="12" viewBox="0 0 12 12" fill="none">
         <polyline points="4,2 8,6 4,10" stroke="var(--neutral-200)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
       </svg>
       <div class="collapse-tooltip">Collapse</div>
     </div>
    
         <!-- Content Panel -->
     <div class="content-panel" id="contentPanel">
       <!-- Content Header -->
       <div class="content-header">
         <!-- Search Bar -->
         <div class="search-container">
           <div class="search-icon">
             <svg viewBox="0 0 24 24">
               <circle cx="11" cy="11" r="8"></circle>
               <path d="m21 21-4.35-4.35"></path>
             </svg>
           </div>
           <input type="text" class="search-input" placeholder="Search…">
         </div>
         
         <!-- Header Actions -->
         <div class="header-actions">
           <div class="header-icon">
             <svg width="16" height="16" viewBox="0 0 16 16">
               <circle cx="8" cy="8" r="8" fill="var(--neutral-50)"/>
             </svg>
           </div>
           <div class="header-icon">
             <svg width="16" height="16" viewBox="0 0 16 16">
               <circle cx="8" cy="8" r="8" fill="var(--neutral-50)"/>
             </svg>
           </div>
           <div class="header-icon">
             <svg width="16" height="16" viewBox="0 0 16 16">
               <circle cx="8" cy="8" r="8" fill="var(--neutral-50)"/>
             </svg>
           </div>
           <div class="header-icon">
             <svg width="16" height="16" viewBox="0 0 16 16">
               <circle cx="8" cy="8" r="8" fill="var(--neutral-50)"/>
             </svg>
           </div>
         </div>
       </div>
       
       <!-- Content Body -->
       <div class="content-body">
         <div class="content-placeholder"></div>
       </div>
     </div>
  </div>

  <!-- Include shared components -->
  <script src="../../shared/components/account-switcher.js"></script>
  <script src="../../shared/components/popover.js"></script>

  <script type="module">
    // Initialize account switcher with hierarchical structure
    const navAccountSwitcher = new AccountSwitcher(
      document.getElementById('nav-account-switcher'),
      {
        currentAccount: { id: 'all-accounts', name: 'All accounts', type: 'Acme, Inc.', isAllAccounts: true },
        accounts: [
          { id: 'acme-eats-us', name: 'Acme Eats US', type: 'United States' },
          { id: 'acme-eats-ca', name: 'Acme Eats CA', type: 'Canada' },
          { id: 'acme-eats-uk', name: 'Acme Eats UK', type: 'United Kingdom' },
          { id: 'acme-rides-us', name: 'Acme Rides US', type: 'United States' },
          { id: 'acme-rides-ca', name: 'Acme Rides CA', type: 'Canada' },
          { id: 'acme-deliveries-us', name: 'Acme Deliveries US', type: 'United States' },
          { id: 'acme-deliveries-uk', name: 'Acme Deliveries UK', type: 'United Kingdom' },
          { id: 'acme-financial', name: 'Acme Financial', type: 'Global' }
        ],
        variant: '2-line',
        onAccountChange: (selectedAccount) => {
          console.log('🔄 Sub-account selected from nav dropdown:', selectedAccount);
          
          if (selectedAccount.isAllAccounts) {
            // Handle "All accounts" aggregate view
            console.log('📊 Showing aggregate view for all accounts');
            
            // Update content panel using the centralized function
            window.updateContentPanel(selectedAccount);
            
            return;
          }
          
          // Handle regular sub-account switching within the current organization
          currentSubAccount = selectedAccount.id;
          window.currentSubAccount = currentSubAccount;
          
          // Update the content panel to show the new sub-account
          window.updateContentPanel(window.accounts[window.currentAccount]);
          
          console.log('✅ Sub-account switch complete:', selectedAccount.name);
        }
      }
    );
    
    // Store globally for access by updateNavAccountSwitcher function
    window.navAccountSwitcherInstance = navAccountSwitcher;
    
    // Manage hamburger button visibility when account switcher opens/closes
    const accountSwitcherContainer = document.querySelector('.account-switcher-container');
    
    // Override the open method to add container class
    const originalOpen = navAccountSwitcher.open.bind(navAccountSwitcher);
    navAccountSwitcher.open = function() {
      originalOpen();
      accountSwitcherContainer.classList.add('account-switcher-open');
    };
    
    // Override the close method to remove container class
    const originalClose = navAccountSwitcher.close.bind(navAccountSwitcher);
    navAccountSwitcher.close = function() {
      originalClose();
      accountSwitcherContainer.classList.remove('account-switcher-open');
    };
    
    // Initialize
    console.log('🚀 Dash Chrome ready!');
  </script>
    </div> <!-- Close app-container -->
  </body>
</html> 