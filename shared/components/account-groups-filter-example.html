<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Groups Filter - Preview</title>
    <link rel="stylesheet" href="../styles/variables.css">
    <link rel="stylesheet" href="../styles/base.css">
    <link rel="stylesheet" href="../styles/account-groups-filter.css">
    <style>
        body {
            padding: 40px;
            background: var(--neutral-25);
        }
        .preview-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .preview-header {
            margin-bottom: 32px;
        }
        .preview-header h1 {
            font-size: var(--font-size-24);
            font-weight: var(--font-weight-semibold);
            color: var(--neutral-900);
            margin: 0 0 8px 0;
        }
        .preview-header p {
            color: var(--neutral-600);
            margin: 0;
        }
        .demo-section {
            background: white;
            padding: 24px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .demo-section h3 {
            color: var(--neutral-900);
            font-weight: var(--font-weight-semibold);
        }
    </style>
</head>
<body>
    <div class="preview-container">
        <div class="preview-header">
            <h1>Account Groups Filter Component</h1>
            <p>Interactive component for filtering and selecting account groups with automatic account count display in the trigger for all group types - demonstrated in different page positions</p>
        </div>
        
        <div class="demo-section">
            <h3 style="margin-top: 0;">Default Position</h3>
            
            <!-- Filter Container -->
            <div style="position: relative;">
            <!-- Trigger Button -->
            <button class="account-groups-trigger" id="filterTrigger">
                <span class="trigger-show">Show</span>
                <span class="trigger-separator">|</span>
                <span class="trigger-option" id="filterOption">All accounts</span>
                <svg class="trigger-chevron" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M2.16699 4.375C2.39082 4.15117 2.75918 4.15117 2.98301 4.375L6 7.39199L9.01699 4.375C9.24082 4.15117 9.60918 4.15117 9.83301 4.375C10.0568 4.59883 10.0568 4.96719 9.83301 5.19102L6.40801 8.61602C6.18418 8.83984 5.81582 8.83984 5.59199 8.61602L2.16699 5.19102C1.94316 4.96719 1.94316 4.59883 2.16699 4.375Z" fill="currentColor"/>
                </svg>
            </button>
            
            <!-- Popover (open by default for testing) -->
            <div class="account-groups-popover" id="popover" style="display: none;">
                <!-- Column 1 - Groups -->
                <div class="groups-section">
                        <div class="groups-header">
                            <svg width="14" height="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 6px; flex-shrink: 0;">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M16 7.82679C16 7.94141 15.9803 8.05518 15.9417 8.16312L13.974 13.6727C13.6898 14.4687 12.9358 15 12.0906 15H2C0.895431 15 0 14.1046 0 13V3C0 1.89543 0.89543 1 2 1H4.58579C4.851 1 5.10536 1.10536 5.29289 1.29289L6 2H11C12.1046 2 13 2.89543 13 4V5H14C15.1046 5 16 5.89543 16 7V7.82679ZM3.75 6.5C3.33579 6.5 3 6.16421 3 5.75C3 5.33579 3.33579 5 3.75 5H11.5V4C11.5 3.72386 11.2761 3.5 11 3.5H6C5.60218 3.5 5.22064 3.34196 4.93934 3.06066L4.37868 2.5H2C1.72386 2.5 1.5 2.72386 1.5 3V13C1.5 13.2761 1.72386 13.5 2 13.5H12.0906C12.3019 13.5 12.4904 13.3672 12.5614 13.1682L14.5 7.74018V7C14.5 6.72386 14.2761 6.5 14 6.5H3.75Z" fill="currentColor"/>
                            </svg>
                            Account groups
                        </div>
                        <button class="group-item active" data-group="all">All accounts</button>
                        <button class="group-item" data-group="connected">Connected accounts</button>
                        <button class="group-item" data-group="express">Express accounts</button>
                        <button class="group-item" data-group="standard">Standard accounts</button>
                        <button class="group-item" data-group="custom">Custom accounts</button>
                    </div>
                
                <!-- Column 2 - Accounts Section -->
                <div class="accounts-section">
                        <div class="filter-search-container">
                            <div class="filter-search-icon">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                                    <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <input type="text" class="filter-search-input" id="searchInput" placeholder="Search accounts">
                        </div>
                        
                        <!-- Pinned Select All Row -->
                        <div class="select-all-container" id="selectAllContainer">
                            <!-- Select all will be dynamically populated by JavaScript -->
                        </div>
                        
                        <div class="accounts-list" id="accountsList">
                            <!-- Individual accounts will be dynamically populated by JavaScript -->
                        </div>
                        
                        <!-- Footer inside accounts-section (Column 2) -->
                        <div class="popover-footer">
                            <div class="footer-buttons">
                                <button class="btn-cancel" onclick="exampleFilter.close()">Cancel</button>
                                <button class="btn-apply" onclick="exampleFilter.applySelection()">Apply</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Instance 2: Centered Position -->
        <div class="demo-section" style="text-align: center; margin: 80px 0;">
            <h3 style="margin-top: 0;">Centered Position</h3>
            <div style="position: relative; display: inline-block;">
                <button class="account-groups-trigger" id="centeredFilterTrigger">
                    <span class="trigger-show">Show</span>
                    <span class="trigger-separator">|</span>
                    <span class="trigger-option" id="centeredFilterOption">All accounts</span>
                    <svg class="trigger-chevron" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M2.16699 4.375C2.39082 4.15117 2.75918 4.15117 2.98301 4.375L6 7.39199L9.01699 4.375C9.24082 4.15117 9.60918 4.15117 9.83301 4.375C10.0568 4.59883 10.0568 4.96719 9.83301 5.19102L6.40801 8.61602C6.18418 8.83984 5.81582 8.83984 5.59199 8.61602L2.16699 5.19102C1.94316 4.96719 1.94316 4.59883 2.16699 4.375Z" fill="currentColor"/>
                    </svg>
                </button>
                
                <div class="account-groups-popover" id="centeredPopover" style="display: none;">
                    <div class="groups-section">
                        <div class="groups-header">
                            <svg width="14" height="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 6px; flex-shrink: 0;">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M16 7.82679C16 7.94141 15.9803 8.05518 15.9417 8.16312L13.974 13.6727C13.6898 14.4687 12.9358 15 12.0906 15H2C0.895431 15 0 14.1046 0 13V3C0 1.89543 0.89543 1 2 1H4.58579C4.851 1 5.10536 1.10536 5.29289 1.29289L6 2H11C12.1046 2 13 2.89543 13 4V5H14C15.1046 5 16 5.89543 16 7V7.82679ZM3.75 6.5C3.33579 6.5 3 6.16421 3 5.75C3 5.33579 3.33579 5 3.75 5H11.5V4C11.5 3.72386 11.2761 3.5 11 3.5H6C5.60218 3.5 5.22064 3.34196 4.93934 3.06066L4.37868 2.5H2C1.72386 2.5 1.5 2.72386 1.5 3V13C1.5 13.2761 1.72386 13.5 2 13.5H12.0906C12.3019 13.5 12.4904 13.3672 12.5614 13.1682L14.5 7.74018V7C14.5 6.72386 14.2761 6.5 14 6.5H3.75Z" fill="currentColor"/>
                            </svg>
                            Account groups
                        </div>
                        <button class="group-item active" data-group="all">All accounts</button>
                        <button class="group-item" data-group="connected">Connected accounts</button>
                        <button class="group-item" data-group="express">Express accounts</button>
                        <button class="group-item" data-group="standard">Standard accounts</button>
                        <button class="group-item" data-group="custom">Custom accounts</button>
                    </div>
                    
                    <div class="accounts-section">
                        <div class="filter-search-container">
                            <div class="filter-search-icon">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                                    <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <input type="text" class="filter-search-input" id="centeredSearchInput" placeholder="Search accounts">
                        </div>
                        
                        <div class="select-all-container" id="centeredSelectAllContainer">
                            <!-- Select all will be dynamically populated by JavaScript -->
                        </div>
                        
                        <div class="accounts-list" id="centeredAccountsList">
                            <!-- Individual accounts will be dynamically populated by JavaScript -->
                        </div>
                        
                        <div class="popover-footer">
                            <div class="footer-buttons">
                                <button class="btn-cancel" onclick="centeredFilter.close()">Cancel</button>
                                <button class="btn-apply" onclick="centeredFilter.applySelection()">Apply</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Instance 3: Right Aligned Position -->
        <div class="demo-section" style="margin: 80px 0; text-align: right;">
            <h3 style="margin-top: 0;">Right Aligned Position</h3>
            <div style="position: relative; display: inline-block;">
                <button class="account-groups-trigger" id="rightFilterTrigger">
                    <span class="trigger-show">Show</span>
                    <span class="trigger-separator">|</span>
                    <span class="trigger-option" id="rightFilterOption">All accounts</span>
                    <svg class="trigger-chevron" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M2.16699 4.375C2.39082 4.15117 2.75918 4.15117 2.98301 4.375L6 7.39199L9.01699 4.375C9.24082 4.15117 9.60918 4.15117 9.83301 4.375C10.0568 4.59883 10.0568 4.96719 9.83301 5.19102L6.40801 8.61602C6.18418 8.83984 5.81582 8.83984 5.59199 8.61602L2.16699 5.19102C1.94316 4.96719 1.94316 4.59883 2.16699 4.375Z" fill="currentColor"/>
                    </svg>
                </button>
                
                <div class="account-groups-popover" id="rightPopover" style="display: none;">
                    <div class="groups-section">
                        <div class="groups-header">
                            <svg width="14" height="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 6px; flex-shrink: 0;">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M16 7.82679C16 7.94141 15.9803 8.05518 15.9417 8.16312L13.974 13.6727C13.6898 14.4687 12.9358 15 12.0906 15H2C0.895431 15 0 14.1046 0 13V3C0 1.89543 0.89543 1 2 1H4.58579C4.851 1 5.10536 1.10536 5.29289 1.29289L6 2H11C12.1046 2 13 2.89543 13 4V5H14C15.1046 5 16 5.89543 16 7V7.82679ZM3.75 6.5C3.33579 6.5 3 6.16421 3 5.75C3 5.33579 3.33579 5 3.75 5H11.5V4C11.5 3.72386 11.2761 3.5 11 3.5H6C5.60218 3.5 5.22064 3.34196 4.93934 3.06066L4.37868 2.5H2C1.72386 2.5 1.5 2.72386 1.5 3V13C1.5 13.2761 1.72386 13.5 2 13.5H12.0906C12.3019 13.5 12.4904 13.3672 12.5614 13.1682L14.5 7.74018V7C14.5 6.72386 14.2761 6.5 14 6.5H3.75Z" fill="currentColor"/>
                            </svg>
                            Account groups
                        </div>
                        <button class="group-item active" data-group="all">All accounts</button>
                        <button class="group-item" data-group="connected">Connected accounts</button>
                        <button class="group-item" data-group="express">Express accounts</button>
                        <button class="group-item" data-group="standard">Standard accounts</button>
                        <button class="group-item" data-group="custom">Custom accounts</button>
                    </div>
                    
                    <div class="accounts-section">
                        <div class="filter-search-container">
                            <div class="filter-search-icon">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                                    <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <input type="text" class="filter-search-input" id="rightSearchInput" placeholder="Search accounts">
                        </div>
                        
                        <div class="select-all-container" id="rightSelectAllContainer">
                            <!-- Select all will be dynamically populated by JavaScript -->
                        </div>
                        
                        <div class="accounts-list" id="rightAccountsList">
                            <!-- Individual accounts will be dynamically populated by JavaScript -->
                        </div>
                        
                        <div class="popover-footer">
                            <div class="footer-buttons">
                                <button class="btn-cancel" onclick="rightFilter.close()">Cancel</button>
                                <button class="btn-apply" onclick="rightFilter.applySelection()">Apply</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Include global component -->
    <script src="./account-groups-filter.js"></script>
    
    <script>
        // Sample organization data for standalone example
        const sampleOrganizationData = {
            name: "Example Corporation",
            accounts: [
                { id: "acc_1", name: "Main Business Account", type: "Standard", color: "blue" },
                { id: "acc_2", name: "E-commerce Platform", type: "Connected", color: "green" },
                { id: "acc_3", name: "Mobile App Division", type: "Express", color: "blue" },
                { id: "acc_4", name: "Creative Services", type: "Express", color: "green" },
                { id: "acc_5", name: "Digital Marketing Hub", type: "Connected", color: "blue" },
                { id: "acc_6", name: "Customer Support Portal", type: "Standard", color: "green" },
                { id: "acc_7", name: "Analytics & Insights", type: "Connected", color: "blue" },
                { id: "acc_8", name: "Content Management", type: "Express", color: "green" },
                { id: "acc_9", name: "Payment Processing", type: "Standard", color: "blue" },
                { id: "acc_10", name: "Subscription Services", type: "Connected", color: "green" },
                { id: "acc_11", name: "API Gateway", type: "Standard", color: "blue" },
                { id: "acc_12", name: "Developer Tools", type: "Express", color: "green" },
                { id: "acc_13", name: "Security & Compliance", type: "Standard", color: "blue" },
                { id: "acc_14", name: "International Markets", type: "Connected", color: "green" },
                { id: "acc_15", name: "Partner Integrations", type: "Express", color: "blue" }
            ]
        };

        // Initialize the global component
        function generateAccountGroups() {
            const allAccounts = sampleOrganizationData.accounts;
            
            // Convert to filter format
            const accountData = allAccounts.map((acc, index) => ({
                name: acc.name,
                initials: generateInitials(acc.name),
                color: acc.color || (index % 2 === 0 ? 'blue' : 'green'),
                checked: true,
                id: acc.id,
                type: acc.type || 'Account'
            }));

            const groupedData = {
                all: accountData,
                connected: accountData.filter(acc => acc.type === 'Connected'),
                express: accountData.filter(acc => acc.type === 'Express'),
                standard: accountData.filter(acc => acc.type === 'Standard'),
                custom: accountData.filter(acc => acc.type === 'Custom')
            };

            return groupedData;
        }

        function generateInitials(name) {
            return name.split(' ').map(word => word[0]).join('').toUpperCase().slice(0, 2);
        }
        
        // Make filters globally accessible for onclick handlers
        let exampleFilter, centeredFilter, rightFilter;
        
        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            // Instance 1: Default position
            exampleFilter = new AccountGroupsFilter({
                triggerId: 'filterTrigger',
                popoverId: 'popover',
                searchInputId: 'searchInput',
                selectAllContainerId: 'selectAllContainer',
                accountsListId: 'accountsList',
                triggerOptionId: 'filterOption',
                namespace: 'example',
                generateAccountGroups: generateAccountGroups
            });

            // Instance 2: Centered position
            centeredFilter = new AccountGroupsFilter({
                triggerId: 'centeredFilterTrigger',
                popoverId: 'centeredPopover',
                searchInputId: 'centeredSearchInput',
                selectAllContainerId: 'centeredSelectAllContainer',
                accountsListId: 'centeredAccountsList',
                triggerOptionId: 'centeredFilterOption',
                namespace: 'centered',
                generateAccountGroups: generateAccountGroups
            });

            // Instance 3: Right aligned position
            rightFilter = new AccountGroupsFilter({
                triggerId: 'rightFilterTrigger',
                popoverId: 'rightPopover',
                searchInputId: 'rightSearchInput',
                selectAllContainerId: 'rightSelectAllContainer',
                accountsListId: 'rightAccountsList',
                triggerOptionId: 'rightFilterOption',
                namespace: 'right',
                generateAccountGroups: generateAccountGroups
            });
        });
    </script>
</body>
</html>
